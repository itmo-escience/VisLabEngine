<Window x:Class="WpfEditorTest.InterfaceEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfEditorTest"
        xmlns:ZWpfLib="clr-namespace:ZWpfLib;assembly=ZWpfLib"
        xmlns:system ="clr-namespace:System;assembly=mscorlib"
        xmlns:math ="clr-namespace:Fusion.Core.Mathematics;assembly=Fusion"
        xmlns:panels ="clr-namespace:WpfEditorTest.ChildPanels"
        mc:Ignorable="d"
        Title="InterfaceEditor"
        Width="800" Height="600"
        MinWidth="400" MinHeight="300"
        WindowStartupLocation="CenterScreen"
        KeyDown="Window_KeyDown">
    <Window.Resources>
        <local:PropertyValueConverter x:Key="propValueConverter" />
    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding Command="{x:Static local:InterfaceEditor.LoadSceneCmd}"
                        Executed="ExecutedLoadSceneCommand"
                        CanExecute="AlwaysCanExecute" />
        <CommandBinding Command="{x:Static local:InterfaceEditor.SaveSceneCmd}"
                        Executed="ExecutedSaveSceneCommand"
                        CanExecute="AlwaysCanExecute" />
        <CommandBinding Command="{x:Static local:InterfaceEditor.SaveFrameCmd}"
                        Executed="ExecutedSaveFrameCommand"
                        CanExecute="AlwaysCanExecute" />
        <CommandBinding Command="{x:Static local:InterfaceEditor.RedoChangeCmd}"
                        Executed="ExecutedRedoChangeCommand"
                        CanExecute="AlwaysCanExecute" />
        <CommandBinding Command="{x:Static local:InterfaceEditor.UndoChangeCmd}"
                        Executed="ExecutedUndoChangeCommand"
                        CanExecute="AlwaysCanExecute" />
    </Window.CommandBindings>
    <Grid MaxWidth="10000" MaxHeight="10000">
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition />
        </Grid.RowDefinitions>
        <ToolBarTray Grid.Row="0" IsLocked="True" >
            <ToolBar>
                <Button Command="{x:Static local:InterfaceEditor.SaveSceneCmd}" Content="Save scene" />
                <Button Command="{x:Static local:InterfaceEditor.LoadSceneCmd}" Content="Load scene" />
                <Button Command="{x:Static local:InterfaceEditor.SaveFrameCmd}" Content="Save frame" />

                <Button Command="{x:Static local:InterfaceEditor.UndoChangeCmd}" Content="Undo change" />
                <Button Command="{x:Static local:InterfaceEditor.RedoChangeCmd}" Content="Redo change" />
            </ToolBar>
        </ToolBarTray>
        <Grid Grid.Row="1" Name="LocalGrid"
              MouseMove="LocalGrid_MouseMove"
              MouseLeftButtonUp="LocalGrid_MouseLeftButtonUp"
              MouseLeftButtonDown="LocalGrid_MouseLeftButtonDown"
              Background="Chartreuse"
            >
            <ZWpfLib:DXElement x:Name="DxElem"
                               HorizontalAlignment="Left" VerticalAlignment="Top"
                               MinHeight="100" MaxHeight="10000"
                               MinWidth="100" MaxWidth="10000"
                               />
        </Grid>
    </Grid>
</Window>
